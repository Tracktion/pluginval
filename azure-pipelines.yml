jobs:
- job: Linux
  pool:
    vmImage: 'Ubuntu-16.04'
  steps:
  - script: |
      sudo add-apt-repository ppa:ubuntu-toolchain-r/test
      sudo apt-get update
      sudo apt-get install -y tree gcc-6 g++-6 freeglut3-dev g++ libasound2-dev libcurl4-openssl-dev libfreetype6-dev libjack-jackd2-dev libx11-dev libxcomposite-dev libxcursor-dev libxinerama-dev libxrandr-dev mesa-common-dev ladspa-sdk webkit2gtk-4.0 libgtk-3-dev
    displayName: 'Apt install dependencies'
  - script: |
      export DISPLAY=:99.0
      sh -e /etc/init.d/xvfb start
      sleep 3 # give xvfb some time to start
    displayName: 'Configure'
  - script: |
      tree
      install/linux_build
    displayName: 'Linux Build'